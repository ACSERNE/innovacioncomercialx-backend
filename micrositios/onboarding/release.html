<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard Cockpit | ComercialX (Release)</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background: #f0f0f0; }
    h2, h3 { color: #222; margin-top: 2rem; }
    select, button { margin: 0.5rem; padding: 0.5rem; font-size: 1rem; }
    table { width: 100%; border-collapse: collapse; margin-top: 1rem; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
    .section { margin-top: 3rem; }
    .precio { font-weight: bold; color: #007700; margin-top: 1rem; }
    label { font-weight: bold; margin-right: 0.5rem; }
    svg.logo { display:block; margin:auto; width:80%; max-width:600px; height:auto; }
  </style>
</head>
<body>

  <!-- Logo SVG -->
  <svg class="logo" viewBox="0 0 800 120" xmlns="http://www.w3.org/2000/svg">
    <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle"
          font-family="Arial, Helvetica, sans-serif" font-size="32" font-weight="bold" fill="#222">
      ComercialX Cockpit
    </text>
  </svg>

  <h2>🧭 Selector cockpitizado (Release)</h2>
  <label for="tipoFiltro">Tipo de tienda:</label>
  <select id="tipoFiltro" title="Selecciona tipo de tienda" onchange="mostrarPrecio()">
    <option value="">Todos los tipos</option>
    <option value="fisica">🏪 Física</option>
    <option value="online">🛒 Online</option>
    <option value="hibrida">🔀 Híbrida</option>
    <option value="demo">🎁 Demo</option>
  </select>

  <label for="entornoFiltro">Entorno:</label>
  <select id="entornoFiltro" title="Selecciona entorno">
    <option value="">Todos los entornos</option>
    <option value="dev">Dev</option>
    <option value="prod">Prod</option>
    <option value="test">Test</option>
  </select>

  <div id="precioSeleccionado" class="precio">💲 Precio: —</div>

  <button onclick="filtrarLog()">🔍 Filtrar log</button>
  <button onclick="exportarCSV()">📄 Exportar CSV</button>
  <button onclick="activarOnboarding()">🚀 Activar Onboarding</button>

  <div class="section">
    <h3>📊 Log técnico tabular</h3>
    <table id="tablaLog">
      <thead><tr><th>Fecha</th><th>Tipo</th><th>Entorno</th><th>Acción</th><th>Precio</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let logData=[];
    const precios={fisica:"$69.990",online:"$59.990",hibrida:"$89.990",demo:"🎁 Gratis"};

    function mostrarPrecio(){
      const tipo=document.getElementById('tipoFiltro').value;
      document.getElementById('precioSeleccionado').innerText=`💲 Precio: ${precios[tipo]||"—"}`;
    }

    function cargarLog(){
      fetch('exports/onboarding/onboarding.log')
        .then(r=>r.text())
        .then(data=>{
          logData=data.trim().split('\n').map(l=>{
            const [fecha,tipo,entorno,accion,precio]=l.split('|'); return {fecha,tipo,entorno,accion,precio};
          }).filter(Boolean);
          renderizarTabla(logData);
        }).catch(e=>console.error("⚠️ Error al cargar log:",e));
    }

   
